!function(){"use strict";angular.module("static",["ui.router","ngMaterial"])}(),function(){"use strict";function t(t,e){var n=this;n.places=[],n.search=function(){n.places=[],t.getPlaces().then(function(t){return n.spin=!n.spin,n.places=t}).then(n.ratePlaces)},n.ratePlaces=function(t){t.forEach(function(t){/^[A-Za-z][A-Za-z0-9 ]*$/.test(t.name)&&e.ratePlace(t.name).then(function(e){t.rating=e.rating})})}}angular.module("static").controller("MainController",t),t.$inject=["googlePlaces","places"]}(),function(){"use strict";function t(t){this.ratePlace=function(e){return t({url:"rate",method:"GET",params:{place:e}}).then(function(t){return t.data})}}angular.module("static").service("places",t),t.$inject=["$http"]}(),function(){"use strict";function t(t,e,n){this.getPlaces=function(){return e(function(e,a){n.navigator.geolocation.getCurrentPosition(function(i){function c(n,i){return i!==t.maps.places.PlacesServiceStatus.OK?a("Failed to get places"):e(n.map(function(e){var n=t.maps.geometry.spherical.computeDistanceBetween,a=new t.maps.LatLng(e.geometry.location.G,e.geometry.location.K);return e.distance=n(s,a),e.rating=0,e}))}var r=i.coords.latitude,o=i.coords.longitude,s=new t.maps.LatLng(r,o),l=new t.maps.Map(n.document.getElementById("map"),{zoom:12,center:s,mapTypeId:t.maps.MapTypeId.ROADMAP}),u=new t.maps.places.PlacesService(l);u.nearbySearch({location:s,radius:"500",types:["bars","restaurant"]},c)})})}}angular.module("static").service("googlePlaces",t),t.$inject=["google","$q","$window"]}(),function(){"use strict";function t(t){t.debug("runBlock end")}angular.module("static").run(t),t.$inject=["$log"]}(),function(){"use strict";function t(t,e){t.state("home",{url:"/",templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"main"}),e.otherwise("/")}angular.module("static").config(t),t.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";angular.module("static").constant("moment",moment).constant("google",google)}(),function(){"use strict";function t(t){t.debugEnabled(!0)}angular.module("static").config(t),t.$inject=["$logProvider"]}(),angular.module("static").run(["$templateCache",function(t){t.put("app/main/main.html",'<div layout="column" layout-fill="" style="padding-bottom: 32px;"><md-button class="md-raised md-primary" ng-click="main.spin=!main.spin;main.search()">Search for places</md-button><md-progress-circular style="margin: 20px auto;" ng-show="main.spin" class="md-hue-2" md-mode="indeterminate"></md-progress-circular><md-whiteframe class="md-whiteframe-z3" layout="" ng-repeat="place in main.places | orderBy: [\'-rating\', \'+distance\']"><md-card-content><h2 class="md-title">Name: {{ place.name }}</h2><p class="md-body-1">Distance: {{ place.distance | number: 2 }} Meters</p><p class="md-body-1">Rating: {{ place.rating }} stars</p><img style="position: absolute; top: 10%; right: 1%; width: 30px;" ng-src="{{ place.icon }}"></md-card-content><md-progress-linear class="md-accent" md-mode="\'determinate\'" value="100"></md-progress-linear></md-whiteframe></div>')}]);